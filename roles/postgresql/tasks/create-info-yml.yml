---

- name: "Create open-ldap info file directory {{ postgresql_info_file | dirname }}"
  file:
    path: "{{ postgresql_info_file | dirname }}"
    state: directory
    owner: "{{ current_user }}"
    mode: u=rwx,g=,o=
  delegate_to: localhost
  vars:
    ansible_become: false

- name: "Create resource file with ldap info in {{ postgresql_info_file }}"
  template:
    dest: "{{ postgresql_info_file }}"
    src: templates/postgresql-info.j2
    force: yes
    owner: "{{ current_user }}"
    mode: u=rw,g=,o=
  delegate_to: localhost
  vars:
    ansible_become: false

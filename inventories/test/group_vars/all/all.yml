---

# current inventory 
current_inventory_env: "{{ inventory_dir | basename }}"

# resource directory
resource_dir: "{{ inventory_dir }}/../../resources/{{ current_inventory_env }}"

# open ldap info file
openldap_info_file: "{{ inventory_dir }}/../../resources/{{ current_inventory_env }}/open-ldap/info.yml"

# secrets vault location
secrets_vault_location: "{{ inventory_dir}}/group_vars/all_servers/vault-secrets.yml"
secrets_vault_id: "{{ current_inventory_env }}-secrets"

# CA / certificates to copy to host (if needed) 
cacerts_dir:  "{{ resource_dir }}/cacerts"
certs_dir:  "{{ resource_dir }}/certs"
dhparams_dir:  "{{ resource_dir }}/dhparams"
ca_certs: "{{ query('fileglob', cacerts_dir + '/*.crt') }}"

# name of internal CA and CA signed certificate (how it ends up in the resources/cacerts directory)
internal_cacerts_ca_file: "internal-ca.crt"
internal_certs_cert_file: "internal-cert.crt"
dhparam_file: "dhparam.pem"

# Paths of internal certificate (signed by above CA) and private/public key files. 
# These are not present in resources dir (for security reasons is it only present in the ~/ansible user)
internal_cert_priv_key_file: "{{ certs_stuff_location }}/{{ current_inventory_env }}-int-cert-key-priv.pem"
internal_cert_pub_key_file: "{{ certs_stuff_location }}/{{ current_inventory_env }}-int-cert-key-pub.pem"

# Current user is used for initial ssh connection.
current_user: "{{ lookup('env','USER') }}"
current_user_home: "{{ lookup('env','HOME') }}"

# User on the target that will be used for ansible deployments.
deployment_user: ansible
# Groups of the deployment user.
deployment_user_groups: sudo

# Current user is used for initial ssh connection.
ssh_user: "{{ current_user }}"

# keypair settings (key will only be here during setup of authentication for host)
ssh_keypair_location: "{{ current_user_home }}/ansible/ssl/keypairs/{{ current_inventory_env }}"

# ca keypair and certificates
certs_stuff_location: "{{ current_user_home }}/ansible/ssl/certs/{{ current_inventory_env }}"

# ca keypair and certificates
dhparam_location: "{{ current_user_home }}/ansible/ssl/dhparam/{{ current_inventory_env }}"

# private key location for key authentication ()
ssh_key_file_from_vault: "{{ ssh_keypair_location }}/ssh-key-from-vault"

